import{j as e}from"./jsx-runtime-1a9d9a93.js";import{r as u}from"./index-8b3efc3f.js";import{u as j}from"./useFetchWithCallbacks-0999b78a.js";import"./_commonjsHelpers-de833af9.js";const y=({baseUrl:r="https://jsonplaceholder.typicode.com"})=>{const{chain:d}=j("/users/1",{baseUrl:r,timeout:5e3}),[p,h]=u.useState([]),[a,t]=u.useState(!1),n=s=>{h(c=>[...c,`${new Date().toLocaleTimeString()}: ${s}`])},l=()=>h([]),f=async()=>{t(!0),l(),await d().fetch(s=>{n(`✅ Step 1: Fetched user ${s.name}`)}).post({name:"Updated Name",email:"updated@example.com",id:1},s=>{n(`✅ Step 2: Posted update for ${s.name}`)}).put({name:"Final Name",email:"final@example.com",id:1},s=>{n(`✅ Step 3: Put final update for ${s.name}`)}).then(s=>{n("🎉 Chain completed successfully with final result!")}).catch(s=>{n(`❌ Chain failed: ${s.message}`)}).finally(()=>{n("🔄 Chain execution finished"),t(!1)}).execute()},C=async()=>{t(!0),l(),await d().fetch(s=>{n(`✅ Step 1: Fetched user ${s.name}`)}).patch({email:"patched@example.com"},s=>{n(`✅ Step 2: Patched email to ${s.email}`)}).put({name:"Chain User",email:"chain@example.com",id:1},s=>{n(`✅ Step 3: Full update to ${s.name}`)}).delete(s=>{n("✅ Step 4: Cleanup completed")}).then(s=>{n("🎉 Complex chain completed!")}).catch(s=>{n(`❌ Complex chain failed: ${s.message}`)}).finally(()=>{n("🔄 Complex chain execution finished"),t(!1)}).execute()},o={padding:"10px 20px",margin:"10px 10px 10px 0",backgroundColor:a?"#ccc":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:a?"not-allowed":"pointer"};return e.jsxs("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif"},children:[e.jsx("h2",{children:"Request Chaining Example"}),e.jsx("p",{children:"This demonstrates sequential HTTP operations using the chain API."}),e.jsxs("p",{children:["Base URL: ",e.jsx("code",{children:r})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("button",{onClick:f,disabled:a,style:o,children:a?"Running...":"Run Simple Chain (GET → POST → PUT)"}),e.jsx("button",{onClick:C,disabled:a,style:o,children:a?"Running...":"Run Complex Chain (GET → PATCH → PUT → DELETE)"}),e.jsx("button",{onClick:l,disabled:a,style:{...o,backgroundColor:a?"#ccc":"#6c757d"},children:"Clear Logs"})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("h3",{children:"Chain Execution Logs:"}),e.jsx("div",{style:{backgroundColor:"#f8f9fa",padding:"15px",borderRadius:"4px",fontSize:"14px",fontFamily:"monospace",minHeight:"200px",border:"1px solid #dee2e6"},children:p.length===0?e.jsx("div",{style:{color:"#6c757d",fontStyle:"italic"},children:"Click a button above to see chain execution logs..."}):p.map((s,c)=>e.jsx("div",{style:{marginBottom:"5px"},children:s},c))})]}),e.jsxs("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#e9ecef",borderRadius:"4px"},children:[e.jsx("h4",{children:"How Chain Works:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Sequential Execution:"})," Each operation waits for the previous to complete"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Error Handling:"})," If any step fails, the chain stops and calls .catch()"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Final Callbacks:"})," .then() runs only if all steps succeed"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Cleanup:"})," .finally() always runs regardless of success/failure"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Individual Callbacks:"})," Each method can have its own success/error/loading callbacks"]})]})]})]})},k={title:"useFetchWithCallbacks/Request Chaining",component:y,parameters:{layout:"fullscreen",docs:{description:{story:"Advanced request chaining example showing sequential HTTP operations with comprehensive error handling."}}},argTypes:{baseUrl:{control:"text",description:"Base URL for the API"}}},i={args:{baseUrl:"https://jsonplaceholder.typicode.com"}};var m,x,g;i.parameters={...i.parameters,docs:{...(m=i.parameters)==null?void 0:m.docs,source:{originalSource:`{
  args: {
    baseUrl: 'https://jsonplaceholder.typicode.com'
  }
}`,...(g=(x=i.parameters)==null?void 0:x.docs)==null?void 0:g.source}}};const R=["Default"];export{i as Default,R as __namedExportsOrder,k as default};
